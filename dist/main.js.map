{"version":3,"sources":["main.js"],"names":["Shell","accessControlMatrix","command","question","getActiveDomain","split","dirname","addObject","filename","permissions","getDomainPermissionsForObject","includes","console","log","username","addDomain","switchDomain","promptCLLoop","touch","target","useradd","su","edit","read","printMatrix","exit","userShell","run"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;IAEqBA;AAEpB,kBAAc;AAAA;;AACb,OAAKC,mBAAL,GAA2B,sBAA3B;AACA;;;;gCACa;AACb,OAAIC,UAAU,uBAAaC,QAAb,OAA0B,KAAKF,mBAAL,CAAyBG,eAAzB,EAA1B,QAAd;AACA,UAAOF,QAAQG,KAAR,CAAc,GAAd,CAAP;AACA;;;uBAEI,CAAE;;;wBAED,CAAE;;;wBAEFC,SAAS;AACd,QAAKL,mBAAL,CAAyBM,SAAzB,CAAmCD,OAAnC;AACA;;;wBAEKE,UAAU;AACf,QAAKP,mBAAL,CAAyBM,SAAzB,CAAmCC,QAAnC;AACA;;;uBAEIA,UAAU;;AAEd,OAAIC,cAAc,KAAKR,mBAAL,CAAyBS,6BAAzB,CAAuDF,QAAvD,CAAlB;;AAEA,OAAIC,YAAYE,QAAZ,CAAqB,GAArB,CAAJ,EAA+B;AAC9BC,YAAQC,GAAR,CAAY,IAAZ;AACA;AACA;AACDD,WAAQC,GAAR,CAAY,KAAZ;AACA;;;uBAEIL,UAAU;;AAEd,OAAIC,cAAc,KAAKR,mBAAL,CAAyBS,6BAAzB,CAAuDF,QAAvD,CAAlB;;AAEA,OAAIC,YAAYE,QAAZ,CAAqB,GAArB,CAAJ,EAA+B;AAC9BC,YAAQC,GAAR,CAAY,IAAZ;AACA;AACA;AACDD,WAAQC,GAAR,CAAY,KAAZ;AACA;;;0BAEOC,UAAU;AACjB,QAAKb,mBAAL,CAAyBc,SAAzB,CAAmCD,QAAnC;AACA;;;qBAEEA,UAAU;AACZ,QAAKb,mBAAL,CAAyBe,YAAzB,CAAsCF,QAAtC;AACA;;;wBAEK;AAAA;;AAEL,0BAAaG,YAAb,CAA0B;AACvBC,WAAO,eAACC,MAAD,EAAY;;AAEjB,WAAKD,KAAL,CAAWC,MAAX;AACH,KAJwB;AAKzBC,aAAS,iBAACN,QAAD,EAAc;AACtB,WAAKM,OAAL,CAAaN,QAAb;AACA,KAPwB;AAQzBO,QAAI,YAACP,QAAD,EAAc;AACjB,WAAKO,EAAL,CAAQP,QAAR;AACA,KAVwB;AAWzBQ,UAAM,cAACd,QAAD,EAAc;AACnB,WAAKc,IAAL,CAAUd,QAAV;AACA,KAbwB;AAczBe,UAAM,cAACf,QAAD,EAAc;AACnB,WAAKe,IAAL,CAAUf,QAAV;AACA,KAhBwB;;AAkBzBgB,iBAAa,uBAAM;AAClB,WAAKvB,mBAAL,CAAyBuB,WAAzB;AACA,KApBwB;AAqBzBC,UAAM,gBAAW;AAChB,YAAO,IAAP;AACA;AAvBwB,IAA1B;AAyBAb,WAAQC,GAAR,CAAY,QAAZ;AACA;;;;;;kBAhFmBb;;;AAmFrB,IAAI0B,YAAY,IAAI1B,KAAJ,EAAhB;;AAEA0B,UAAUC,GAAV","file":"main.js","sourcesContent":["import readlineSync from 'readline-sync';\nimport fs from 'fs';\nimport Matrix from './matrix';\n\nexport default class Shell {\n\n\tconstructor() {\n\t\tthis.accessControlMatrix = new Matrix();\n\t}\n\treadCommand() {\n\t\tlet command = readlineSync.question(`$${this.accessControlMatrix.getActiveDomain()}: `);\n\t\treturn command.split(' ');\n\t}\n\n\tls() {}\n\n\tpwd() {}\n\n\tmkdir(dirname) {\n\t\tthis.accessControlMatrix.addObject(dirname);\n\t}\n\n\ttouch(filename) {\n\t\tthis.accessControlMatrix.addObject(filename);\n\t}\n\n\tread(filename) {\n\t\t\n\t\tlet permissions = this.accessControlMatrix.getDomainPermissionsForObject(filename);\n\n\t\tif (permissions.includes('r')) {\n\t\t\tconsole.log(true);\n\t\t\treturn;\n\t\t}\n\t\tconsole.log(false);\n\t}\n\n\tedit(filename) {\n\t\t\n\t\tlet permissions = this.accessControlMatrix.getDomainPermissionsForObject(filename);\n\n\t\tif (permissions.includes('w')) {\n\t\t\tconsole.log(true);\n\t\t\treturn;\n\t\t}\n\t\tconsole.log(false);\n\t}\n\n\tuseradd(username) {\n\t\tthis.accessControlMatrix.addDomain(username);\n\t}\n\n\tsu(username) {\n\t\tthis.accessControlMatrix.switchDomain(username);\t\t\n\t}\n\n\trun() {\n\n\t\treadlineSync.promptCLLoop({\n\t\t  \ttouch: (target) => {\n\n\t\t    \tthis.touch(target);\n\t\t\t},\n\t\t\tuseradd: (username) => { \n\t\t\t\tthis.useradd(username);\n\t\t\t},\n\t\t\tsu: (username) => {\n\t\t\t\tthis.su(username);\n\t\t\t},\n\t\t\tedit: (filename) => {\n\t\t\t\tthis.edit(filename);\n\t\t\t},\n\t\t\tread: (filename) => {\n\t\t\t\tthis.read(filename);\n\t\t\t}\n\t\t\t,\n\t\t\tprintMatrix: () => {\n\t\t\t\tthis.accessControlMatrix.printMatrix();\n\t\t\t},\n\t\t\texit: function() { \n\t\t\t\treturn true; \n\t\t\t}\n\t\t});\n\t\tconsole.log('Exited');\n\t}\n}\n\nlet userShell = new Shell();\n\nuserShell.run();"]}